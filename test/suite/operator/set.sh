. test/assert.sh

hint 'operator/set'

# Value Setting
pass '("$<-" "abc" #0# "x")' '"abc"'
pass '("$<-" "abc" #1# "x")' '"xbc"'
pass '("$<-" "abc" #2# "x")' '"axc"'
pass '("$<-" "abc" #3# "x")' '"abx"'
pass '("$<-" "abc" #4# "x")' '"abc"'
pass '("$<-" [#10#] #1# ?)' '[?]'
pass '("$<-" [?] #1# #10#)' '[#10#]'
pass '("$<-" [?] #1# "10")' '["10"]'
pass '("$<-" [?] #1# [#10#])' '[[#10#]]'
pass '("$<-" [#10# #20# #30#] #0# #99#)' '[#10# #20# #30#]'
pass '("$<-" [#10# #20# #30#] #1# #99#)' '[#99# #20# #30#]'
pass '("$<-" [#10# #20# #30#] #2# #99#)' '[#10# #99# #30#]'
pass '("$<-" [#10# #20# #30#] #3# #99#)' '[#10# #20# #99#]'
pass '("$<-" [#10# #20# #30#] #4# #99#)' '[#10# #20# #30#]'
pass '("$<-" {} "null" ?)' '{"null" ?}'
pass '("$<-" {} "number" #100#)' '{"number" #100#}'
pass '("$<-" {} "string" "word")' '{"string" "word"}'
pass '("$<-" {} "list" [#1# #2# #3#])' '{"list" [#1# #2# #3#]}'
pass '("$<-" {} "map" {"key" "value"})' '{"map" {"key" "value"}}'
pass '("$<-" {"null" #10#} "null" ?)' '{"null" ?}'
pass '("$<-" {"number" ?} "number" #100#)' '{"number" #100#}'
pass '("$<-" {"string" ?} "string" "word")' '{"string" "word"}'
pass '("$<-" {"list" ?} "list" [#1# #2# #3#])' '{"list" [#1# #2# #3#]}'
pass '("$<-" {"map" ?} "map" {"key" "value"})' '{"map" {"key" "value"}}'

# Argument Error
fail '("$<-")' '#4#'
fail '("$<-" ?)' '#4#'
fail '("$<-" ? ?)' '#4#'
fail '("$<-" ? ? ?)' '#4#'
fail '("$<-" ? ? ##)' '#4#'
fail '("$<-" ? ? "")' '#4#'
fail '("$<-" ? ? [])' '#4#'
fail '("$<-" ? ? {})' '#4#'
fail '("$<-" ? ##)' '#4#'
fail '("$<-" ? ## ?)' '#4#'
fail '("$<-" ? ## ##)' '#4#'
fail '("$<-" ? ## "")' '#4#'
fail '("$<-" ? ## [])' '#4#'
fail '("$<-" ? ## {})' '#4#'
fail '("$<-" ? "")' '#4#'
fail '("$<-" ? "" ?)' '#4#'
fail '("$<-" ? "" ##)' '#4#'
fail '("$<-" ? "" "")' '#4#'
fail '("$<-" ? "" [])' '#4#'
fail '("$<-" ? "" {})' '#4#'
fail '("$<-" ? [])' '#4#'
fail '("$<-" ? [] ?)' '#4#'
fail '("$<-" ? [] ##)' '#4#'
fail '("$<-" ? [] "")' '#4#'
fail '("$<-" ? [] [])' '#4#'
fail '("$<-" ? [] {})' '#4#'
fail '("$<-" ? {})' '#4#'
fail '("$<-" ? {} ?)' '#4#'
fail '("$<-" ? {} ##)' '#4#'
fail '("$<-" ? {} "")' '#4#'
fail '("$<-" ? {} [])' '#4#'
fail '("$<-" ? {} {})' '#4#'
fail '("$<-" ##)' '#4#'
fail '("$<-" ## ?)' '#4#'
fail '("$<-" ## ? ?)' '#4#'
fail '("$<-" ## ? ##)' '#4#'
fail '("$<-" ## ? "")' '#4#'
fail '("$<-" ## ? [])' '#4#'
fail '("$<-" ## ? {})' '#4#'
fail '("$<-" ## ##)' '#4#'
fail '("$<-" ## ## ?)' '#4#'
fail '("$<-" ## ## ##)' '#4#'
fail '("$<-" ## ## "")' '#4#'
fail '("$<-" ## ## [])' '#4#'
fail '("$<-" ## ## {})' '#4#'
fail '("$<-" ## "")' '#4#'
fail '("$<-" ## "" ?)' '#4#'
fail '("$<-" ## "" ##)' '#4#'
fail '("$<-" ## "" "")' '#4#'
fail '("$<-" ## "" [])' '#4#'
fail '("$<-" ## "" {})' '#4#'
fail '("$<-" ## [])' '#4#'
fail '("$<-" ## [] ?)' '#4#'
fail '("$<-" ## [] ##)' '#4#'
fail '("$<-" ## [] "")' '#4#'
fail '("$<-" ## [] [])' '#4#'
fail '("$<-" ## [] {})' '#4#'
fail '("$<-" ## {})' '#4#'
fail '("$<-" ## {} ?)' '#4#'
fail '("$<-" ## {} ##)' '#4#'
fail '("$<-" ## {} "")' '#4#'
fail '("$<-" ## {} [])' '#4#'
fail '("$<-" ## {} {})' '#4#'
fail '("$<-" "")' '#4#'
fail '("$<-" "" ?)' '#4#'
fail '("$<-" "" ? ?)' '#4#'
fail '("$<-" "" ? ##)' '#4#'
fail '("$<-" "" ? "")' '#4#'
fail '("$<-" "" ? [])' '#4#'
fail '("$<-" "" ? {})' '#4#'
fail '("$<-" "" ##)' '#4#'
fail '("$<-" "" ## ?)' '#4#'
fail '("$<-" "" ## ##)' '#4#'
fail '("$<-" "" ## [])' '#4#'
fail '("$<-" "" ## {})' '#4#'
fail '("$<-" "" "")' '#4#'
fail '("$<-" "" "" ?)' '#4#'
fail '("$<-" "" "" ##)' '#4#'
fail '("$<-" "" "" "")' '#4#'
fail '("$<-" "" "" [])' '#4#'
fail '("$<-" "" "" {})' '#4#'
fail '("$<-" "" [])' '#4#'
fail '("$<-" "" [] ?)' '#4#'
fail '("$<-" "" [] ##)' '#4#'
fail '("$<-" "" [] "")' '#4#'
fail '("$<-" "" [] [])' '#4#'
fail '("$<-" "" [] {})' '#4#'
fail '("$<-" "" {})' '#4#'
fail '("$<-" "" {} ?)' '#4#'
fail '("$<-" "" {} ##)' '#4#'
fail '("$<-" "" {} "")' '#4#'
fail '("$<-" "" {} [])' '#4#'
fail '("$<-" "" {} {})' '#4#'
fail '("$<-" [])' '#4#'
fail '("$<-" [] ?)' '#4#'
fail '("$<-" [] ? ?)' '#4#'
fail '("$<-" [] ? ##)' '#4#'
fail '("$<-" [] ? "")' '#4#'
fail '("$<-" [] ? [])' '#4#'
fail '("$<-" [] ? {})' '#4#'
fail '("$<-" [] ##)' '#4#'
fail '("$<-" [] "")' '#4#'
fail '("$<-" [] "" ?)' '#4#'
fail '("$<-" [] "" ##)' '#4#'
fail '("$<-" [] "" "")' '#4#'
fail '("$<-" [] "" [])' '#4#'
fail '("$<-" [] "" {})' '#4#'
fail '("$<-" [] [])' '#4#'
fail '("$<-" [] [] ?)' '#4#'
fail '("$<-" [] [] ##)' '#4#'
fail '("$<-" [] [] "")' '#4#'
fail '("$<-" [] [] [])' '#4#'
fail '("$<-" [] [] {})' '#4#'
fail '("$<-" [] {})' '#4#'
fail '("$<-" [] {} ?)' '#4#'
fail '("$<-" [] {} ##)' '#4#'
fail '("$<-" [] {} "")' '#4#'
fail '("$<-" [] {} [])' '#4#'
fail '("$<-" [] {} {})' '#4#'
fail '("$<-" {})' '#4#'
fail '("$<-" {} ?)' '#4#'
fail '("$<-" {} ? ?)' '#4#'
fail '("$<-" {} ? ##)' '#4#'
fail '("$<-" {} ? "")' '#4#'
fail '("$<-" {} ? [])' '#4#'
fail '("$<-" {} ? {})' '#4#'
fail '("$<-" {} ##)' '#4#'
fail '("$<-" {} ## ?)' '#4#'
fail '("$<-" {} ## ##)' '#4#'
fail '("$<-" {} ## "")' '#4#'
fail '("$<-" {} ## [])' '#4#'
fail '("$<-" {} ## {})' '#4#'
fail '("$<-" {} "")' '#4#'
fail '("$<-" {} [])' '#4#'
fail '("$<-" {} [] ?)' '#4#'
fail '("$<-" {} [] ##)' '#4#'
fail '("$<-" {} [] "")' '#4#'
fail '("$<-" {} [] [])' '#4#'
fail '("$<-" {} [] {})' '#4#'
fail '("$<-" {} {})' '#4#'
fail '("$<-" {} {} ?)' '#4#'
fail '("$<-" {} {} ##)' '#4#'
fail '("$<-" {} {} "")' '#4#'
fail '("$<-" {} {} [])' '#4#'
fail '("$<-" {} {} {})' '#4#'

# Error Propogation
fail '("$<-" ("<>" "ERROR") #1# "x")' '"ERROR"'
fail '("$<-" "abc" ("<>" "ERROR") "x")' '"ERROR"'
fail '("$<-" "abc" #1# ("<>" "ERROR"))' '"ERROR"'
fail '("$<-" [#10# #20# #30#] #1# ("<>" "ERROR"))' '"ERROR"'
